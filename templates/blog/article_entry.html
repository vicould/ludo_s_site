{% extends 'layout/blog_base.html' %}

{% block title %}{{ article_entry.title }} || {% endblock %}
{% block extracss %}<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}css/article.css" media="screen" />{% endblock %}

{% block content %}
<div id="article">
  <div id="article_header">
    <h2> {{ article_entry.title }} </h2>
    <div id="article_informations">
      Written on the {{ article_entry.date|date:"dS F Y" }} at {{ article_entry.date|time:"H:i" }} by <a href="/authors/{{ article_entry.author }}">{{ article_entry.author }}</a>
    </div>
  </div>
  <div id="content">
    {{ article_entry.content|safe }}
  </div>
  <div id="article_tags">
    <span id="tags_word">Tags :</span>
    {% for tag in article_entry.tag.all %}
    <a href="{{ tag.get_absolute_url }}">{{ tag.name }}</a>
    {% endfor %}
  </div>
</div>
<div id="comments_wrapper">
  <h3><a href="#comments">Comments</a></h3>
  <div id="comments">
    {% load comments %}
    {% get_comment_count for article_entry as comment_count %}
    {% if comment_count = 0 %}
    <p>No comments yet, start commenting below !</p>
    {% else %}
    {% get_comment_list for article_entry as comment_list %}
    {% for comment in comment_list %}
    <div class="comment_{% cycle 'even' 'odd' %}">
      <div class="comment_informations">
        <div class="comment_user">{{ comment.user_name }}</div>
        <div class="comment_date">{{ comment.submit_date }}</div>
      </div>
      <div class="comment_content">{{ comment.comment }}</div>
    </div>
    {% endfor %}
    {% endif %}
  </div>
  {% if article_entry.allow_comments %}
  <h3>Post a comment</h3>
  <div id="comment_form">
    {% get_comment_form for article_entry as form %}
    <form action="{% comment_form_target %}" method="post">{% csrf_token %}
      <ul>
        <li>{{ form.content_type }}</li>
        <li>{{ form.object_pk }}</li>
        <li>{{ form.timestamp }}</li>
        <li>{{ form.security_hash }}</li>
        <li>Name</li>
        <li class="input_element">{{ form.name }}</li>
        <li>Comment</li>
        <li class="input_element">{{ form.comment }}</li>
        <li><span style="display: none;">{{ form.honeypot }}</span></li>
        <li><input type="submit" name="preview" class="submit-post" value="Preview" /></li>
      </ul>
    </form>
  </div>
  {% endif %}
</div>
{% endblock %}
